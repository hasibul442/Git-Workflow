# সিপ্যানেলে ডিপ্লয় গিটহাব অ্যাকশন

এই গিটহাব অ্যাকশনটি `main` ব্রাঞ্চে কোড পুশ করার সময় একটি প্রোজেক্টকে সিপ্যানেল সার্ভারে স্বয়ংক্রিয়ভাবে ডিপ্লয় করে। কনফিগারেশনটি `.github/workflows/deploy-to-cpanel.yml` ফাইলে সংজ্ঞায়িত করা হয়েছে।

## উদ্দেশ্য

`Deploy to cPanel` অ্যাকশনটি ওয়েব প্রোজেক্ট বিল্ড এবং সিপ্যানেল সার্ভারে ডিপ্লয় প্রক্রিয়াকে সহজ করে, যাতে `main` ব্রাঞ্চে আপডেটগুলো স্বয়ংক্রিয়ভাবে সার্ভারে প্রতিফলিত হয়।

## পূর্বশর্ত

- গিটহাব রিপোজিটরিতে ওয়ার্কফ্লো কনফিগার করার জন্য লেখার অ্যাক্সেস।
- এফটিপি অ্যাক্সেস সক্ষম করা একটি সিপ্যানেল হোস্টিং অ্যাকাউন্ট।
- নোড.জেএস-ভিত্তিক একটি প্রোজেক্ট যার বিল্ড প্রক্রিয়া রয়েছে (যেমন, `npm` ব্যবহার করে)।
- গিটহাব অ্যাকশন, ইয়ামএল কনফিগারেশন এবং এফটিপি ক্রেডেনশিয়াল সেটআপ সম্পর্কে প্রাথমিক জ্ঞান।

## সেটআপ নির্দেশাবলী

আপনার রিপোজিটরিতে Deploy to cPanel অ্যাকশন সেট আপ করতে নিচের ধাপগুলো অনুসরণ করুন:

1. **ওয়ার্কফ্লো ফাইল তৈরি করুন**
   - আপনার রিপোজিটরিতে `.github/workflows` নামে একটি ডিরেক্টরি তৈরি করুন, যদি এটি ইতিমধ্যে না থাকে।
   - নিচের ইয়ামএল কনফিগারেশনটি `.github/workflows` ডিরেক্টরিতে `deploy-to-cpanel.yml` নামে একটি ফাইলে যোগ করুন:

   ```yaml
   name: Deploy to cPanel
   on:
     push:
       branches:
         - main
   jobs:
     deploy:
       runs-on: ubuntu-latest
       steps:
       - name: Checkout code
         uses: actions/checkout@v2
       - name: Build project
         run: |
           npm install
           npm run build
       - name: Deploy to cPanel
         uses: SamKirkland/FTP-Deploy-Action@4.0.0
         with:
           server: ${{ secrets.FTP_SERVER }}
           username: ${{ secrets.FTP_USERNAME }}
           password: ${{ secrets.FTP_PASSWORD }}
           server-dir: public_html/
           local-dir: ./dist/
   ```

2. **গিটহাব সিক্রেট সেট আপ করুন**
   - গিটহাবে আপনার রিপোজিটরিতে যান এবং **Settings > Secrets and variables > Actions > Secrets** এ নেভিগেট করুন।
   - নিচের সিক্রেটগুলো যোগ করুন:
     - `FTP_SERVER`: আপনার সিপ্যানেল এফটিপি সার্ভারের ঠিকানা (যেমন, `ftp.yourdomain.com` বা একটি আইপি ঠিকানা)।
     - `FTP_USERNAME`: আপনার সিপ্যানেল এফটিপি ইউজারনেম।
     - `FTP_PASSWORD`: আপনার সিপ্যানেল এফটিপি পাসওয়ার্ড।
   - নিশ্চিত করুন যে এই ক্রেডেনশিয়ালগুলোর `public_html/` ডিরেক্টরি (বা আপনার নির্দিষ্ট ডিপ্লয়মেন্ট ডিরেক্টরি) অ্যাক্সেস করার প্রয়োজনীয় অনুমতি রয়েছে।

3. **প্রোজেক্ট বিল্ড যাচাই করুন**
   - নিশ্চিত করুন যে আপনার প্রোজেক্টে একটি `package.json` ফাইল রয়েছে যাতে `npm install` এবং `npm run build` স্ক্রিপ্ট কনফিগার করা আছে।
   - বিল্ড আউটপুট `./dist/` ডিরেক্টরিতে তৈরি হওয়া উচিত (বা আপনার বিল্ড আউটপুট ডিরেক্টরির সাথে মেলানোর জন্য ওয়ার্কফ্লো ফাইলে `local-dir` আপডেট করুন)।

4. **কমিট এবং পুশ করুন**
   - `deploy-to-cpanel.yml` ওয়ার্কফ্লো ফাইলটি আপনার রিপোজিটরির ডিফল্ট ব্রাঞ্চে (যেমন, `main` বা `master`) কমিট করুন।
   - গিটহাবে পরিবর্তনগুলো পুশ করুন যাতে ওয়ার্কফ্লো ট্রিগার হয়।

5. **ডিপ্লয়মেন্ট যাচাই করুন**
   - `main` ব্রাঞ্চে পুশ করার পর, আপনার রিপোজিটরির **Actions** ট্যাবে গিয়ে ওয়ার্কফ্লোর কার্যকারিতা পর্যবেক্ষণ করুন।
   - নিশ্চিত করুন যে `./dist/` ডিরেক্টরির বিল্ড ফাইলগুলো সিপ্যানেল সার্ভারের `public_html/` ডিরেক্টরিতে সফলভাবে আপলোড হয়েছে।
   - আপনার ওয়েবসাইটে গিয়ে নিশ্চিত করুন যে ডিপ্লয় করা পরিবর্তনগুলো লাইভ হয়েছে।

## কনফিগারেশন বিবরণ

- **ট্রিগার**: অ্যাকশনটি `main` ব্রাঞ্চে পুশ ইভেন্টে চলে (`on: push: branches: - main`)।
- **কোড চেকআউট**: রিপোজিটরি কোড পুনরুদ্ধার করতে `actions/checkout@v2` ব্যবহার করে।
- **প্রোজেক্ট বিল্ড**: ডিপেন্ডেন্সি ইনস্টল করতে `npm install` এবং `./dist/` ডিরেক্টরিতে বিল্ড আউটপুট তৈরি করতে `npm run build` চালায়।
- **সিপ্যানেলে ডিপ্লয়**: `SamKirkland/FTP-Deploy-Action@4.0.0` ব্যবহার করে `./dist/` এর কন্টেন্ট এফটিপির মাধ্যমে সিপ্যানেল সার্ভারের `public_html/` ডিরেক্টরিতে আপলোড করে।
- **সিক্রেট**: অ্যাকশনটি সংবেদনশীল এফটিপি ক্রেডেনশিয়াল নিরাপদে সংরক্ষণ করতে গিটহাব সিক্রেট (`FTP_SERVER`, `FTP_USERNAME`, `FTP_PASSWORD`) ব্যবহার করে।

## কাস্টমাইজেশন অপশন

- **বিল্ড ডিরেক্টরি পরিবর্তন**: যদি আপনার বিল্ড আউটপুট অন্য ডিরেক্টরিতে থাকে (যেমন, `dist/` এর পরিবর্তে `build/`) তবে ওয়ার্কফ্লো ফাইলে `local-dir` প্যারামিটার আপডেট করুন:
  ```yaml
  local-dir: ./build/
  ```

- **ডিপ্লয়মেন্ট ডিরেক্টরি পরিবর্তন**: যদি আপনি ভিন্ন সিপ্যানেল ডিরেক্টরিতে ডিপ্লয় করতে চান (যেমন, `public_html/myapp/` এর মতো সাবডিরেক্টরি), তবে `server-dir` প্যারামিটার আপডেট করুন:
  ```yaml
  server-dir: public_html/myapp/
  ```

- **অতিরিক্ত বিল্ড ধাপ**: যদি আপনার প্রোজেক্টের জন্য ভিন্ন বিল্ড প্রক্রিয়া প্রয়োজন হয় (যেমন, Yarn বা Vite এর জন্য), তবে `Build project` ধাপে অতিরিক্ত কমান্ড যোগ করুন।

আরও কনফিগারেশন অপশনের জন্য, [SamKirkland/FTP-Deploy-Action ডকুমেন্টেশন](https://github.com/SamKirkland/FTP-Deploy-Action) দেখুন।

## সমস্যা সমাধান

- **ডিপ্লয়মেন্ট ব্যর্থ**: গিটহাব অ্যাকশন ট্যাবে ওয়ার্কফ্লো লগ চেক করুন। সাধারণ সমস্যাগুলো হলো:
  - গিটহাব সিক্রেটে ভুল এফটিপি ক্রেডেনশিয়াল।
  - ভুল `server-dir` বা `local-dir` পাথ।
  - `package.json` অনুপস্থিত বা অবৈধ বিল্ড স্ক্রিপ্ট।
- **ফাইল আপডেট হচ্ছে না**: নিশ্চিত করুন যে `server-dir` সঠিক সিপ্যানেল ডিরেক্টরির সাথে মেলে এবং এফটিপি ইউজারের লেখার অনুমতি রয়েছে।
- **ওয়ার্কফ্লো ট্রিগার হয়নি**: নিশ্চিত করুন যে `.github/workflows/deploy-to-cpanel.yml` ফাইলটি সঠিক ডিরেক্টরিতে রয়েছে এবং এর ইয়ামএল সিনট্যাক্স সঠিক।
- **অনুমতি সমস্যা**: নিশ্চিত করুন যে গিটহাব অ্যাকশন ওয়ার্কফ্লোর রিপোজিটরি অ্যাক্সেসের অনুমতি রয়েছে এবং এফটিপি ক্রেডেনশিয়ালের টার্গেট ডিরেক্টরিতে লেখার অ্যাক্সেস রয়েছে।

## নিরাপত্তা বিবেচনা

- এফটিপি ক্রেডেনশিয়ালগুলো গিটহাব সিক্রেটে নিরাপদে সংরক্ষণ করুন এবং ওয়ার্কফ্লো ফাইলে হার্ডকোড করা এড়িয়ে চলুন।
- ডিপ্লয়মেন্টের জন্য সীমিত অনুমতি সহ একটি ডেডিকেটেড এফটিপি ইউজার ব্যবহার করুন যাতে নিরাপত্তা ঝুঁকি কমে।
- নিরাপত্তা বজায় রাখতে নিয়মিত এফটিপি ক্রেডেনশিয়াল রোটেট করুন।

## অতিরিক্ত রিসোর্স

- [গিটহাব অ্যাকশন ডকুমেন্টেশন](https://docs.github.com/en/actions)
- [SamKirkland/FTP-Deploy-Action](https://github.com/SamKirkland/FTP-Deploy-Action)
- [ওয়ার্কফ্লো কনফিগারেশন](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions)
- [গিটহাব সিক্রেট ম্যানেজমেন্ট](https://docs.github.com/en/actions/security-guides/encrypted-secrets)
